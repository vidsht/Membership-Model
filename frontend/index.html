<!DOCTYPE html>
<html lang="en">  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#000000" />
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
    <meta
      name="description"
      content="Indians in Ghana - Digital Membership Community"
    />
    
    <!-- Cache Control Meta Tags -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, proxy-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta name="cache-control" content="no-cache" />
    <meta name="expires" content="0" />
    <meta name="pragma" content="no-cache" />
    
    <!-- Immediate Cache Busting Script - Runs BEFORE anything else -->
    <script>
      // Emergency cache clearing - runs immediately when HTML loads
      (function() {
        var timestamp = Date.now();
        var buildVersion = '1759422496557'; // Update this with each deployment
        
        // Skip aggressive cache clearing on localhost to prevent infinite refreshes
        var isLocalhost = window.location.hostname === 'localhost' || 
                         window.location.hostname === '127.0.0.1' ||
                         window.location.port === '3000' ||
                         window.location.port === '3001';
        
        console.log('üö® Emergency cache check at HTML level...');
        console.log('üè† Localhost detected:', isLocalhost);
        
        // Check if we've recently done a cache clear to prevent loops
        var lastCacheClear = localStorage.getItem('last_cache_clear');
        var timeSinceLastClear = timestamp - (parseInt(lastCacheClear) || 0);
        var recentlyClearedCache = timeSinceLastClear < 30000; // 30 seconds (increased)
        
        if (recentlyClearedCache) {
          console.log('‚è∏Ô∏è Skipping cache clear (recent clear detected)');
          return;
        }
        
        // Check if we have a version mismatch
        var storedVersion = localStorage.getItem('membership_cache_version');
        if (storedVersion && !isLocalhost) {
          try {
            var versionData = JSON.parse(storedVersion);
            if (versionData.version !== buildVersion) {
              console.log('üîÑ Version mismatch detected in HTML! Clearing cache...');
              
              // Mark that we're doing a cache clear
              localStorage.setItem('last_cache_clear', timestamp);
              
              // Clear all storage immediately
              setTimeout(function() {
                localStorage.clear();
                sessionStorage.clear();
                
                // Force reload with cache bypass
                var url = new URL(window.location);
                url.searchParams.set('cache_bust', timestamp);
                url.searchParams.set('v', buildVersion);
                window.location.replace(url.toString());
              }, 100);
              return; // Stop execution
            }
          } catch (e) {
            console.log('üßπ Clearing corrupted version data...');
            if (!isLocalhost) {
              localStorage.clear();
              sessionStorage.clear();
            }
          }
        } else if (!storedVersion && !isLocalhost) {
          // First visit, store version
          localStorage.setItem('membership_cache_version', JSON.stringify({
            version: buildVersion,
            timestamp: timestamp
          }));
        }
        
        // Add cache busting to all resource URLs (only in production)
        if (!isLocalhost) {
          document.addEventListener('DOMContentLoaded', function() {
            // Add version parameter to script tags
            var scripts = document.querySelectorAll('script[src]');
            scripts.forEach(function(script) {
              if (!script.src.includes('cache_bust')) {
                var separator = script.src.includes('?') ? '&' : '?';
                script.src = script.src + separator + 'cache_bust=' + timestamp + '&v=' + buildVersion;
              }
            });
          });
        }
        
        console.log('‚úÖ HTML-level cache check complete, version:', buildVersion);
        
        // Register emergency cache clearing service worker (only in production)
        if ('serviceWorker' in navigator && !isLocalhost) {
          // First, unregister any existing service workers to prevent conflicts
          navigator.serviceWorker.getRegistrations().then(function(registrations) {
            registrations.forEach(function(registration) {
              registration.unregister();
            });
          }).then(function() {
            // Only register if we really need cache clearing
            var needsCacheClearing = localStorage.getItem('needs_cache_clearing');
            if (needsCacheClearing === 'true') {
              navigator.serviceWorker.register('/emergency-cache-clear-sw.js')
                .then(function(registration) {
                  console.log('üîß Emergency cache clear SW registered');
                  localStorage.removeItem('needs_cache_clearing');
                })
                .catch(function(error) {
                  console.warn('‚ö†Ô∏è Emergency SW registration failed:', error);
                });
            }
          });
        } else if (isLocalhost) {
          console.log('üè† Skipping service worker registration on localhost');
        }
      })();
    </script>
    
    <!-- DNS prefetch and preconnect for external domains -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <!-- Favicon served from public/ -->
    <link rel="icon" type="image/png" href="/logo.png" />
    <link rel="shortcut icon" href="/logo.png" />
    <link rel="apple-touch-icon" href="/logo.png" />
    
    <!-- Critical CSS for above-the-fold content -->
    <style>
      /* Critical CSS for immediate render - Header and Hero only */
      :root {
        --primary: #118AB2; --secondary: #EF476F; --accent: #FFD166; --light: #F8F9FA;
        --dark: #073B4C; --success: #06D6A0; --warning: #FFC341; --danger: #EF476F;
        --purple: #7400b8; --font-main: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        --border-radius-card: 15px; --border-radius-btn: 8px;
        --box-shadow-light: 0 5px 15px rgba(0, 0, 0, 0.08);
        --box-shadow-medium: 0 10px 30px rgba(0, 0, 0, 0.15);
        --space-sm: 0.5rem; --space-md: 1rem; --space-lg: 1.5rem; --space-xl: 2rem; --space-xxl: 3rem;
      }
      * { box-sizing: border-box; margin: 0; padding: 0; }
      html { scroll-behavior: smooth; }
      body { 
        font-family: var(--font-main); color: var(--dark); background-color: #f5f7fa; line-height: 1.6; min-height: 100vh; 
      }
      
      /* Header critical styles */
      header {
        background: linear-gradient(to right, #8E1616, #661212, #4b0707);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000;
        color: white; padding: 2px 0; transition: all 0.3s ease;
      }
      .header-content {
        display: flex; justify-content: space-between; align-items: center;
        margin: 0 auto; padding: 0 50px; flex-wrap: wrap; width: 100%; min-height: 70px;
      }
      .logo { display: flex; align-items: center; justify-content: flex-start; gap: 15px; }
      .logo img { height: 100px; width: auto; display: block; }
      
      /* Hero critical styles with space reservation */
      .hero {
        position: relative; min-height: 100vh; 
        color:#5B0E0E; display: flex; align-items: center; justify-content: center; 
        margin-bottom: var(--space-xxl); overflow: hidden;
      }
      .hero-content {
        position: relative; z-index: 2; max-width: 800px; margin: 0 auto;
        text-align: center; padding: 0 var(--space-lg);
      }
      .hero h1 {
        font-size: 3.5rem; color:#5B0E0E;
        font-weight: 800; text-shadow: 0 4px 20px rgba(0,0,0,0.8); letter-spacing: -0.02em;
        line-height: 1.1; aspect-ratio: auto;
      }
      .hero p {
        font-size: 1.5rem; margin-bottom: var(--space-xl); max-width: 700px; color:#5B0E0E;
        margin: 0 auto; line-height: 1.4; text-shadow: 0 2px 10px rgba(0,0,0,0.6);
        font-weight: 300; aspect-ratio: auto;
      }
      .hero-actions {
        display: flex; justify-content: center; gap: var(--space-md);
        flex-wrap: wrap;
      }
      .btn {
        display: inline-flex; align-items: center; justify-content: center; gap: 8px;
        padding: 12px 25px; background-color: linear-gradient(135deg, #8D1515, #4C0808); color: var(--dark);
        border: none; border-radius: var(--border-radius-btn); font-size: 1rem;
        font-weight: 600; cursor: pointer; transition: all 0.3s ease;
        text-align: center; box-shadow: var(--box-shadow-light); text-decoration: none;
        min-width: 150px; aspect-ratio: auto;
      }
      .btn-primary {
        background: linear-gradient(135deg, #8D1515, #4C0808); color: white;
        box-shadow: 0 4px 15px rgba(141, 21, 21, 0.3);
      }
      .btn:hover { transform: translateY(-2px); }
      
      /* Loading spinner */
      .loading-container {
        display: flex; justify-content: center; align-items: center; min-height: 50vh;
      }
      .loading-spinner {
        width: 40px; height: 40px; border: 4px solid #f3f3f3;
        border-left: 4px solid var(--primary); border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
      
      /* Responsive critical styles */
      @media (max-width: 768px) {
        .hero { background-attachment: scroll; padding: 80px 0; min-height: 70vh; }
        .hero h1 { font-size: 2.5rem; }
        .hero p { font-size: 1.25rem; }
        .header-content { padding: 0.5rem; }
        .logo img { height: 65px; }
        .hero-actions { flex-direction: row; align-items: center; }
      }
      @media (max-width: 480px) {
        .hero h1 { font-size: 2rem; }
        .hero p { font-size: 1rem; }
      }
    </style>
    
    <!-- Preload critical fonts -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"></noscript>
    
    <!-- Load Font Awesome asynchronously for non-critical icons -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'" media="print">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
    
    <!-- Third-party script loaders - defer until after critical render -->
    <script>
      // Lazy load third-party libraries only when needed
      window.loadQRCode = function() {
        return new Promise((resolve) => {
          if (window.qrcode || window.QRCode) {
            resolve();
            return;
          }
          const script = document.createElement('script');
          script.src = 'https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js';
          script.onload = resolve;
          script.onerror = () => resolve(); // Fail gracefully
          document.head.appendChild(script);
        });
      };
      
      window.loadJSBarcode = function() {
        return new Promise((resolve) => {
          if (window.JsBarcode) {
            resolve();
            return;
          }
          const script = document.createElement('script');
          script.src = 'https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js';
          script.onload = resolve;
          script.onerror = () => resolve(); // Fail gracefully
          document.head.appendChild(script);
        });
      };
      
      // Load non-critical scripts after page load
      window.addEventListener('load', function() {
        // Delay by 100ms to ensure critical path is complete
        setTimeout(function() {
          // Load Font Awesome if not already loaded
          if (!document.querySelector('link[href*="font-awesome"]').sheet) {
            const fa = document.createElement('link');
            fa.rel = 'stylesheet';
            fa.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css';
            document.head.appendChild(fa);
          }
        }, 100);
      });
    </script>
    
    <title>Indians in Ghana - Membership Portal</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script type="module" src="/src/index.jsx?cache_bust=1759422496557&v=1759422496557"></script>
  </body>
</html>
